 <!doctype HTML>
<html>
  <head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
<title>Status Tally</title>
</head>
<style rel='stylesheet' type='text/css'>
.tallPanel {
    width: 100%;
    border: thin solid black;
    border-collapse: collapse;
}
tallPanel th, .tallPanel td {
    border: thin solid black;
    font-weight: bold;
}
</style>
<body> 
<!--<cfdump var="#getStatusCount#"/><br>
<cfabort/>-->
	<table id="statusCount" class="tallPanel">
        <thead>
            <tr><th>Status</th><th align='right'>Count</th></tr>
        </thead>
        <tbody>				
        </tbody>
    </table> 

<script type="text/javascript">
$(document).ready(function() {
	$.ajax({
				  url:  ajaxProjectUrl + "method=getStatusCount",
				  type:  "GET",
				  timeout: 100000, //timeout after 10 seconds
				  data:  { divisionID: readCookie('PTDivisionID'),
				  		   securityID: readCookie('PTSecurityID')},
				  dataType:  'json',
				  success:  function (result){
					  	
					  	//$("table#projectList tbody").empty();
						var q = result.DATA;
						var htmlStr = "";
						var totalCount = 0;
		  				for (var i=0; i<result.ROWCOUNT; i++) {
							totalCount = totalCount + q.STATUSCOUNT[i];
							htmlStr = htmlStr + "<tr bgcolor='#"+ q.COLORCODE[i]  +"' id='" + q.PSTATUSID[i] + "'><td>" + q.STATUS[i] + "</td><td align='right'>" + q.STATUSCOUNT[i] + "</td></tr>";									
								}
							htmlStr = htmlStr + "<tr bgcolor='#FFFF00' id='total'><td>TOTAL</td><td align='right'>" + totalCount + "</td></tr>";	
							// Append the new rows to the body	
		  				     $("table#statusCount tbody").append( htmlStr );								
						
						 } ,
				  error: function (xhr, textStatus, thrownError){ 
						onAjaxError(xhr, textStatus, thrownError);
						}
				});
					
});
</script>
</body>
</html>
